# Windows æ‰“åŒ…æŒ‡å—ï¼ˆä½¿ç”¨ .venvï¼‰

## âœ… é…ç½®å®Œæˆ

ä½ çš„é¡¹ç›®å·²ç»é…ç½®å¥½ä½¿ç”¨ `.venv` è¿›è¡Œæ‰“åŒ…ï¼Œä¸å†éœ€è¦åµŒå…¥å¼ Pythonã€‚

## ğŸ“ æ‰“åŒ…æ­¥éª¤

### 1. ç¡®ä¿ç¯å¢ƒå®Œæ•´

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.venv\Scripts\activate

# éªŒè¯ FunASR å¯ç”¨
python -c "import funasr; print('FunASR OK')"

# ç¡®ä¿æ¨¡å‹å·²ä¸‹è½½
# æ¨¡å‹ä½ç½®: C:\Users\ä½ çš„ç”¨æˆ·å\.cache\modelscope\hub\damo
```

### 2. æ‰§è¡Œæ‰“åŒ…

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ npm
npm run build:win

# æ–¹å¼äºŒï¼šä½¿ç”¨ pnpm
pnpm run build:win
```

æ‰“åŒ…æµç¨‹ä¼šè‡ªåŠ¨ï¼š
1. æ„å»ºå‰ç«¯ï¼ˆ`npm run build:renderer`ï¼‰
2. å°† `.venv` æ‰“åŒ…è¿›åº”ç”¨
3. åˆ›å»º Windows å®‰è£…åŒ…

### 3. æµ‹è¯•æ‰“åŒ…ç»“æœ

æ‰“åŒ…å®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶åœ¨ï¼š
```
dist/win-unpacked/è›è›.exe
```

åŒå‡»è¿è¡Œæµ‹è¯•ï¼

---

## ğŸ“‚ æ‰“åŒ…åçš„ç»“æ„

```
dist/
  win-unpacked/
    è›è›.exe
    resources/
      app.asar
      app.asar.unpacked/
        .venv/              â† ä½ çš„è™šæ‹Ÿç¯å¢ƒ
          Scripts/
            python.exe
          Lib/
            site-packages/
              funasr/
              torch/
              ...
        funasr_server.py
        download_models.py
        src/
        ...
```

---

## ğŸ¯ å·¥ä½œåŸç†

**å¼€å‘æ¨¡å¼** (`npm run dev`)ï¼š
- ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ `.venv/Scripts/python.exe`
- ç›´æ¥è¯»å– `C:\Users\..\.cache\modelscope` çš„æ¨¡å‹

**æ‰“åŒ…åè¿è¡Œ**ï¼š
- ä½¿ç”¨ `resources/app.asar.unpacked/.venv/Scripts/python.exe`
- åŒæ ·è¯»å–ç³»ç»Ÿç¼“å­˜çš„æ¨¡å‹ï¼ˆæ¨¡å‹ä¸ä¼šè¢«æ‰“åŒ…ï¼ŒèŠ‚çœç©ºé—´ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. .venv å¤§å°
`.venv` åŒ…å«æ‰€æœ‰ Python ä¾èµ–ï¼Œå¤§çº¦ **2-3 GB**ï¼Œä¼šå¢åŠ å®‰è£…åŒ…ä½“ç§¯ã€‚

### 2. æ¨¡å‹æ–‡ä»¶
æ¨¡å‹æ–‡ä»¶ï¼ˆ~1.2GBï¼‰**ä¸ä¼šè¢«æ‰“åŒ…**ï¼Œä»ç„¶ä»ç”¨æˆ·çš„ç¼“å­˜ç›®å½•è¯»å–ï¼š
```
C:\Users\ç”¨æˆ·å\.cache\modelscope\hub\damo
```

é¦–æ¬¡è¿è¡Œæ‰“åŒ…åçš„åº”ç”¨æ—¶ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æ¨¡å‹ï¼Œåº”ç”¨ä¼šæç¤ºä¸‹è½½ã€‚

### 3. é¦–æ¬¡æ‰“åŒ…å¯èƒ½è¾ƒæ…¢
ç¬¬ä¸€æ¬¡æ‰“åŒ…æ—¶ï¼Œelectron-builder éœ€è¦å¤„ç†æ•´ä¸ª `.venv` ç›®å½•ï¼Œå¯èƒ½éœ€è¦ **5-10 åˆ†é’Ÿ**ã€‚

### 4. æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶
å·²é…ç½®æ’é™¤ä»¥ä¸‹å†…å®¹ä»¥å‡å°ä½“ç§¯ï¼š
- `__pycache__` ç¼“å­˜
- `.pyc` ç¼–è¯‘æ–‡ä»¶
- `pip` å’Œ `setuptools` åŒ…

---

## ğŸ”§ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜ 1: æ‰“åŒ…åè¿è¡ŒæŠ¥é”™ "Python ä¸å¯ç”¨"

**æ£€æŸ¥**ï¼š
```bash
# æŸ¥çœ‹æ‰“åŒ…åçš„ .venv æ˜¯å¦å­˜åœ¨
dir dist\win-unpacked\resources\app.asar.unpacked\.venv
```

**è§£å†³**ï¼šç¡®ä¿ `.venv` ç›®å½•å®Œæ•´ä¸”åŒ…å«æ‰€æœ‰ä¾èµ–

### é—®é¢˜ 2: æ‰“åŒ…ä½“ç§¯å¤ªå¤§

å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ– `package.json`ï¼Œæ’é™¤æ›´å¤šä¸éœ€è¦çš„æ–‡ä»¶ï¼š
```json
{
  "build": {
    "files": [
      "!.venv/Lib/site-packages/pip/**/*",
      "!.venv/Lib/site-packages/setuptools/**/*",
      "!.venv/Lib/site-packages/wheel/**/*",
      "!.venv/Lib/site-packages/*/tests/**/*",
      "!.venv/Lib/site-packages/*/test/**/*"
    ]
  }
}
```

### é—®é¢˜ 3: ç”¨æˆ·ç”µè„‘ä¸Šè¿è¡ŒæŠ¥é”™

æ‰“åŒ…åçš„åº”ç”¨ä¾èµ–ï¼š
- âœ… **ä¸éœ€è¦** Pythonï¼ˆå·²åŒ…å«åœ¨ `.venv` ä¸­ï¼‰
- âœ… **ä¸éœ€è¦** FunASR åŒ…ï¼ˆå·²åŒ…å«ï¼‰
- âš ï¸ **éœ€è¦** ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆé¦–æ¬¡è¿è¡Œæ—¶ï¼‰

---

## ğŸ“Š å¯¹æ¯”ï¼šåµŒå…¥å¼ vs .venv

| ç‰¹æ€§ | åµŒå…¥å¼ Python | .venv æ–¹æ¡ˆ |
|------|--------------|------------|
| **å¼€å‘** | éœ€è¦ä¸“é—¨å‡†å¤‡ | ç›´æ¥ç”¨ç°æœ‰ç¯å¢ƒ âœ… |
| **æ‰“åŒ…** | éœ€è¦å‡†å¤‡è„šæœ¬ | ç›´æ¥æ‰“åŒ… âœ… |
| **å¤§å°** | ~800MB | ~2-3GB |
| **å…¼å®¹æ€§** | æŸäº›åŒ…ä¸å…¼å®¹ | å®Œå…¨å…¼å®¹ âœ… |
| **ç»´æŠ¤** | ä¸¤å¥—ç¯å¢ƒ | ä¸€å¥—ç¯å¢ƒ âœ… |

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤

```bash
# å¼€å‘
.venv\Scripts\activate
npm run dev

# æ‰“åŒ…
npm run build:win

# æµ‹è¯•æ‰“åŒ…ç»“æœ
dist\win-unpacked\è›è›.exe
```

---

**å°±è¿™ä¹ˆç®€å•ï¼** ğŸ‰
